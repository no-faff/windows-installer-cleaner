<Window x:Class="SimpleWindowsInstallerCleaner.SettingsWindow"
        xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
        xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
        Title="Settings"
        Width="480" Height="420"
        MinWidth="350" MinHeight="310"
        WindowStartupLocation="CenterOwner"
        ResizeMode="CanResizeWithGrip"
        Background="{StaticResource Base100}">

    <Window.InputBindings>
        <KeyBinding Key="Escape" Command="{Binding CancelCommand}"/>
    </Window.InputBindings>

    <Grid Margin="24">
            <Grid.RowDefinitions>
                <RowDefinition Height="Auto"/>
                <RowDefinition Height="10"/>
                <RowDefinition Height="Auto"/>
                <RowDefinition Height="12"/>
                <RowDefinition Height="Auto"/>
                <RowDefinition Height="8"/>
                <RowDefinition Height="*"/>
                <RowDefinition Height="16"/>
                <RowDefinition Height="Auto"/>
                <RowDefinition Height="16"/>
                <RowDefinition Height="Auto"/>
            </Grid.RowDefinitions>

            <TextBlock Grid.Row="0" Text="Exclusion filters"
                       Foreground="#f8fafc" FontSize="15" FontWeight="SemiBold"/>

            <StackPanel Grid.Row="2">
                <TextBlock Text="Some products (notably Adobe) use non-standard patch management that makes their installer files appear orphaned when they may still be needed. Removing them can break updates and repairs."
                           TextWrapping="Wrap" Foreground="#cbd5e1" FontSize="12" Margin="0,0,0,6"/>
                <TextBlock Text="Files whose name, author, title, subject or digital signature matches these terms won't be moved or deleted."
                           TextWrapping="Wrap" Foreground="#94a3b8" FontSize="12"/>
            </StackPanel>

            <Grid Grid.Row="4">
                <Grid.ColumnDefinitions>
                    <ColumnDefinition Width="*"/>
                    <ColumnDefinition Width="8"/>
                    <ColumnDefinition Width="Auto"/>
                </Grid.ColumnDefinitions>

                <TextBox Grid.Column="0" Style="{StaticResource PillTextBox}"
                         Text="{Binding NewFilter, UpdateSourceTrigger=PropertyChanged}">
                    <TextBox.InputBindings>
                        <KeyBinding Key="Return" Command="{Binding AddFilterCommand}"/>
                    </TextBox.InputBindings>
                </TextBox>

                <Button Grid.Column="2" Style="{StaticResource PrimaryPill}"
                        Content="Add" Command="{Binding AddFilterCommand}"/>
            </Grid>

            <Border Grid.Row="6" Style="{StaticResource CardNoPad}">
                <ScrollViewer VerticalScrollBarVisibility="Auto">
                    <ItemsControl ItemsSource="{Binding Filters}" Padding="12,8">
                        <ItemsControl.ItemTemplate>
                            <DataTemplate>
                                <Grid Margin="0,3">
                                    <Grid.ColumnDefinitions>
                                        <ColumnDefinition Width="*"/>
                                        <ColumnDefinition Width="Auto"/>
                                    </Grid.ColumnDefinitions>
                                    <TextBlock Grid.Column="0" Text="{Binding}"
                                               Foreground="#f8fafc" FontSize="14" VerticalAlignment="Center"/>
                                    <Button Grid.Column="1" Style="{StaticResource GhostPill}"
                                            Content="&#x00D7;" Height="28" Padding="8,0" FontSize="15"
                                            Command="{Binding DataContext.RemoveFilterCommand, RelativeSource={RelativeSource AncestorType=Window}}"
                                            CommandParameter="{Binding}"/>
                                </Grid>
                            </DataTemplate>
                        </ItemsControl.ItemTemplate>
                    </ItemsControl>
                </ScrollViewer>
            </Border>

            <CheckBox Grid.Row="8"
                      IsChecked="{Binding CheckPendingReboot}"
                      Content="Check for pending reboots before scanning"
                      Foreground="#f8fafc" FontSize="14"/>

            <StackPanel Grid.Row="10" Orientation="Horizontal" HorizontalAlignment="Right">
                <Button Style="{StaticResource AccentPill}" Content="Save"
                        Command="{Binding SaveCommand}" IsDefault="True" Margin="0,0,8,0"/>
                <Button Style="{StaticResource PrimaryPill}" Content="Cancel"
                        Command="{Binding CancelCommand}"/>
            </StackPanel>
    </Grid>
</Window>
